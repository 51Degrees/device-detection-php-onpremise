<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>51Degrees Device Detection On-Premise PHP: onpremise/gettingStartedWeb.php</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="examplegrabber.js"></script>
<script type="text/javascript" src="testedversionsgrabber.js"></script>
<script type="text/javascript" src="search51.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="docs-main.min.css" rel="stylesheet" type="text/css" />
</head>
<body class="l-docs-index p-doxygen">
<div class="l-index__content">
<!--div id="top"--><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" class="g-header g-header--docs">
  <h1 class="c-brand">
  <a id="projectlogo" href="../../documentation/4.4/index.html" class="c-brand__link"><img class="c-brand__image" alt="Logo" src="logo-51Degrees-Docs.png" style="width:172px;"/></a>
  <span class="c-tagline">51Degrees Device Detection On-Premise PHP
   &#160;<span id="projectnumber">4.4</span>
  </span>
  </h1>
  <div id="projectalign" style="padding-left: 0.5em;">
   <div id="projectbrief">Device detection services for 51Degrees Pipeline</div>
  </div>
  <div id="main-nav"></div>
  <section class="g-search">
    <div class="c-search is-openable" id="searchOpenable">
    <form class="c-search__form">
      <div class="b-form-group b-form-group--with-icon">
        <label for="inputSearch" class="b-text--hidden">Search</label>
        <img src="icon-search.svg" class="b-icon" alt="Search" />
        <input type="text" class="c-search__input" id="inputSearch" onkeyup="javascript:onSearch(this,event.keyCode)" placeholder="Search" aria-label="Search">
      </div>
    </form>
    <div class="c-search__content" id="searchContent">
    </div>
  </div> 
  </section>
</div>
<!-- end header part -->
<main class="g-main">
<!-- Generated by Doxygen 1.8.15 -->
<!-- top -->
	<div class="g-docs__sidenav">																														         <nav id="nav-tree-contents" class="c-sidenav">																														     <h4 class="c-sidenav__heading">Documentation</h4>																									         <div id="nav-sync" class="sync"></div>
  <ul class="c-sidenav__list">																														     </ul>																																				   </nav>    </div><script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('onpremise_2getting_started_web_8php-example.html','');});
/* @license-end */
</script>
<div id="doc-content" class="g-docs__content">
<div class="g-docs__header">
<h2 class="g-docs__page-title">onpremise/gettingStartedWeb.php</h2></div><!--header-->
<div class="g-docs__inner">
<div class="g-docs__primary" id="primary">
<p>This example is available in full on <a href="https://github.com/51Degrees/device-detection-php-onpremise/blob/master/examples/onpremise/gettingStartedWeb.php">GitHub</a>.</p>
<p>
<p>
To run this example, you will need to create a <strong>resource key</strong>. 
The resource key is used as shorthand to store the particular set of 
properties you are interested in as well as any associated license keys 
that entitle you to increased request limits and/or paid-for properties.
</p>
<p>
You can create a resource key using the 51Degrees 
<a href="https://configure.51degrees.com">Configurator</a>.
</p>
</p>
<p>Required Composer Dependencies:</p><ul>
<li>51degrees/fiftyone.devicedetection</li>
</ul>
<h2>Overview</h2>
<p>The <code>DeviceDetectionPipelineBuilder</code> class is used to create a Pipeline instance from the configuration that is supplied. The fiftyone\pipeline\core\Utils module contains helpers which deal with automatically populating evidence from a web request. </p><div class="c-code__block c-code__block--outline"><div class="c-code__line">$flowdata-&gt;evidence-&gt;setFromWebRequest()</div></div><p>The module can also handling setting response headers (e.g. Accept-CH for User-Agent Client Hints) and serving requests for client-side JavaScript and JSON resources. </p><div class="c-code__block c-code__block--outline"><div class="c-code__line">Utils::setResponseHeader($flowdata);</div></div><p>The results of detection can be accessed by through the flowdata object once processed. This can then be used to interrogate the data. </p><div class="c-code__block c-code__block--outline"><div class="c-code__line">$flowdata-&gt;process();</div><div class="c-code__line">$device = $flowdata-&gt;device;</div><div class="c-code__line">$hardwareVendor = $device-&gt;hardwarevendor;</div></div><p>Results can also be accessed in client-side code by using the <code>fod</code> object. See the <a href="https://51degrees.com/pipeline-php/4.3/classfiftyone_1_1pipeline_1_1core_1_1_javascript_builder_element.html">JavaScriptBuilderElement</a> for details on available settings such as changing the <code>fod</code> name. </p><div class="c-code__block c-code__block--outline"><div class="c-code__line">window.onload = function () {</div><div class="c-code__line">    fod.complete(function(data) {</div><div class="c-code__line">        var hardwareName = data.device.hardwarename;</div><div class="c-code__line">        alert(hardwareName.join(&quot;, &quot;));</div><div class="c-code__line">    }</div><div class="c-code__line">}</div></div><h2>View</h2>
<div class="c-code__block c-code__block--outline"><div class="c-code__line">&lt;?php</div><div class="c-code__line"><span class="c-code__comment">/* *********************************************************************</span></div><div class="c-code__line"><span class="c-code__comment"> * This Original Work is copyright of 51 Degrees Mobile Experts Limited.</span></div><div class="c-code__line"><span class="c-code__comment"> * Copyright 2023 51 Degrees Mobile Experts Limited, Davidson House,</span></div><div class="c-code__line"><span class="c-code__comment"> * Forbury Square, Reading, Berkshire, United Kingdom RG1 3EU.</span></div><div class="c-code__line"><span class="c-code__comment"> *</span></div><div class="c-code__line"><span class="c-code__comment"> * This Original Work is licensed under the European Union Public Licence</span></div><div class="c-code__line"><span class="c-code__comment"> * (EUPL) v.1.2 and is subject to its terms as set out below.</span></div><div class="c-code__line"><span class="c-code__comment"> *</span></div><div class="c-code__line"><span class="c-code__comment"> * If a copy of the EUPL was not distributed with this file, You can obtain</span></div><div class="c-code__line"><span class="c-code__comment"> * one at https://opensource.org/licenses/EUPL-1.2.</span></div><div class="c-code__line"><span class="c-code__comment"> *</span></div><div class="c-code__line"><span class="c-code__comment"> * The &#39;Compatible Licences&#39; set out in the Appendix to the EUPL (as may be</span></div><div class="c-code__line"><span class="c-code__comment"> * amended by the European Commission) shall be deemed incompatible for</span></div><div class="c-code__line"><span class="c-code__comment"> * the purposes of the Work and the provisions of the compatibility</span></div><div class="c-code__line"><span class="c-code__comment"> * clause in Article 5 of the EUPL shall not apply.</span></div><div class="c-code__line"><span class="c-code__comment"> *</span></div><div class="c-code__line"><span class="c-code__comment"> * If using the Work as, or as part of, a network application, by</span></div><div class="c-code__line"><span class="c-code__comment"> * including the attribution notice(s) required under Article 5 of the EUPL</span></div><div class="c-code__line"><span class="c-code__comment"> * in the end user terms of the application under an appropriate heading,</span></div><div class="c-code__line"><span class="c-code__comment"> * such notice(s) shall fulfill the requirements of that article.</span></div><div class="c-code__line"><span class="c-code__comment"> * ********************************************************************* */</span></div><div class="c-code__line">?&gt;</div><div class="c-code__line">&lt;head&gt;</div><div class="c-code__line">    &lt;title&gt;Web Integration Example&lt;/title&gt;</div><div class="c-code__line">    &lt;style&gt;</div><div class="c-code__line">        &lt;?php</div><div class="c-code__line">        use <a name="_a0"></a><a class="code" href="classfiftyone_1_1pipeline_1_1devicedetection_1_1examples_1_1onpremise_1_1classes_1_1_example_utils.html">fiftyone\pipeline\devicedetection\examples\onpremise\classes\ExampleUtils</a>;</div><div class="c-code__line">        require __DIR__ . <span class="c-code__stringliteral">&#39;/main.css&#39;</span>;</div><div class="c-code__line">        ?&gt;</div><div class="c-code__line">    &lt;/style&gt;</div><div class="c-code__line">&lt;/head&gt;</div><div class="c-code__line"></div><div class="c-code__line">&lt;div <span class="c-code__keyword">class</span>=<span class="c-code__stringliteral">&quot;main&quot;</span>&gt;</div><div class="c-code__line">    &lt;h2&gt;Web Integration Example&lt;/h2&gt;</div><div class="c-code__line"></div><div class="c-code__line">    &lt;p&gt;</div><div class="c-code__line">        This example demonstrates the use of the Pipeline API to perform device detection within a</div><div class="c-code__line">        simple PHP web project. In particular, it highlights:</div><div class="c-code__line">        &lt;ol&gt;</div><div class="c-code__line">            &lt;li&gt;</div><div class="c-code__line">                Automatic handling of the <span class="c-code__stringliteral">&#39;Accept-CH&#39;</span> header, which is used to request User-Agent</div><div class="c-code__line">                Client Hints from the browser</div><div class="c-code__line">            &lt;/li&gt;</div><div class="c-code__line">            &lt;li&gt;</div><div class="c-code__line">                Client-side evidence collection in order to identify Apple device models and properties</div><div class="c-code__line">                such as screen size.</div><div class="c-code__line">            &lt;/li&gt;</div><div class="c-code__line">        &lt;/ol&gt;</div><div class="c-code__line">    &lt;/p&gt;</div><div class="c-code__line">    &lt;h3&gt;Client Hints&lt;/h3&gt;</div><div class="c-code__line">    &lt;p&gt;</div><div class="c-code__line">        When the first request is made, browsers that support client hints will typically send a subset</div><div class="c-code__line">        of client hints values along with the User-Agent header.</div><div class="c-code__line">        If device detection determines that the browser does support client hints then it will request</div><div class="c-code__line">        that additional client hints headers are sent with future requests by sending the Accept-CH</div><div class="c-code__line">        header with the response.</div><div class="c-code__line">    &lt;/p&gt;</div><div class="c-code__line">    &lt;p&gt;</div><div class="c-code__line">        Note that <span class="c-code__keywordflow">if</span> you have visited <span class="c-code__keyword">this</span> page previously, the value of Accept-CH will have been</div><div class="c-code__line">        cached so all requested client hints headers will be sent on the first request. Using features</div><div class="c-code__line">        such as <span class="c-code__stringliteral">&#39;private browsing&#39;</span> or <span class="c-code__stringliteral">&#39;incognito mode&#39;</span> will allow you to see the <span class="c-code__keyword">true</span> first request</div><div class="c-code__line">        experience as the previous Accept-CH value will not be used.</div><div class="c-code__line">    &lt;/p&gt;</div><div class="c-code__line"></div><div class="c-code__line">    &lt;noscript&gt;</div><div class="c-code__line">        &lt;div <span class="c-code__keyword">class</span>=<span class="c-code__stringliteral">&quot;example-alert&quot;</span>&gt;</div><div class="c-code__line">            WARNING: JavaScript is disabled in your browser. This means that the callback discussed</div><div class="c-code__line">            further down <span class="c-code__keyword">this</span> page will not fire and UACH headers will not be sent.</div><div class="c-code__line">        &lt;/div&gt;</div><div class="c-code__line">    &lt;/noscript&gt;</div><div class="c-code__line">    &lt;?php <span class="c-code__keywordflow">if</span> (ExampleUtils::dataFileIsOld($flowData-&gt;pipeline-&gt;getElement(<span class="c-code__stringliteral">&#39;device&#39;</span>))) { ?&gt;</div><div class="c-code__line">        &lt;div <span class="c-code__keyword">class</span>=<span class="c-code__stringliteral">&quot;example-alert&quot;</span>&gt;</div><div class="c-code__line">            WARNING: This example is <span class="c-code__keyword">using</span> a data file that is more than </div><div class="c-code__line">            &lt;?php echo ExampleUtils::DATA_FILE_AGE_WARNING; ?&gt;</div><div class="c-code__line">            days old. A more recent data file may be needed to </div><div class="c-code__line">            correctly detect the latest devices, browsers, etc. The latest lite data file is available </div><div class="c-code__line">            from the </div><div class="c-code__line">            &lt;a href=<span class="c-code__stringliteral">&quot;https://github.com/51Degrees/device-detection-data&quot;</span>&gt;device-detection-data&lt;/a&gt;</div><div class="c-code__line">            repository on GitHub. Find out about the Enterprise data file, which includes automatic </div><div class="c-code__line">            daily updates, on our &lt;a href=<span class="c-code__stringliteral">&quot;https://51degrees.com/pricing&quot;</span>&gt;pricing page&lt;/a&gt;.</div><div class="c-code__line">        &lt;/div&gt;</div><div class="c-code__line">    &lt;?php } ?&gt;</div><div class="c-code__line"></div><div class="c-code__line">    &lt;div <span class="c-code__keywordtype">id</span>=<span class="c-code__stringliteral">&quot;content&quot;</span>&gt;</div><div class="c-code__line">        &lt;div <span class="c-code__keywordtype">id</span>=<span class="c-code__stringliteral">&quot;response-headers&quot;</span>&gt;</div><div class="c-code__line">            &lt;h2&gt;Response headers:&lt;/h2&gt;</div><div class="c-code__line">            &lt;p <span class="c-code__keyword">class</span>=<span class="c-code__stringliteral">&quot;smaller&quot;</span>&gt;The following response headers were <span class="c-code__keyword">set</span>:&lt;/p&gt;</div><div class="c-code__line">            &lt;table&gt;</div><div class="c-code__line">                &lt;tr&gt;</div><div class="c-code__line">                    &lt;th&gt;Key&lt;/th&gt;</div><div class="c-code__line">                    &lt;th&gt;Value&lt;/th&gt;</div><div class="c-code__line">                &lt;/tr&gt;</div><div class="c-code__line">                &lt;?php</div><div class="c-code__line">                    <span class="c-code__keywordflow">foreach</span> (headers_list() as $header) {</div><div class="c-code__line">                        $parts = explode(<span class="c-code__stringliteral">&#39;: &#39;</span>, $header);</div><div class="c-code__line">                        $output(<span class="c-code__stringliteral">&quot;&lt;tr class=&#39;lightyellow&#39;&gt;&quot;</span>);</div><div class="c-code__line">                        $output(<span class="c-code__stringliteral">&#39;&lt;td&gt;&lt;b&gt;&#39;</span> . $parts[0] . <span class="c-code__stringliteral">&#39;&lt;/b&gt;&lt;/td&gt;&#39;</span>);</div><div class="c-code__line">                        $output(<span class="c-code__stringliteral">&#39;&lt;td&gt;&#39;</span> . $parts[1] . <span class="c-code__stringliteral">&#39;&lt;/td&gt;&#39;</span>);</div><div class="c-code__line">                    }</div><div class="c-code__line">                ?&gt;</div><div class="c-code__line">            &lt;/table&gt;</div><div class="c-code__line">        &lt;/div&gt;</div><div class="c-code__line"></div><div class="c-code__line">        &lt;?php <span class="c-code__keywordflow">if</span> (ExampleUtils::containsAcceptCh() == <span class="c-code__keyword">false</span>) { ?&gt;</div><div class="c-code__line">            &lt;div <span class="c-code__keyword">class</span>=<span class="c-code__stringliteral">&quot;example-alert&quot;</span>&gt;</div><div class="c-code__line">                WARNING: There is no Accept-CH header in the response. This may indicate that your </div><div class="c-code__line">                browser does not support User-Agent Client Hints. This is not necessarily a problem,</div><div class="c-code__line">                but <span class="c-code__keywordflow">if</span> you are wanting to <span class="c-code__keywordflow">try</span> out detection <span class="c-code__keyword">using</span> User-Agent Client Hints, then make</div><div class="c-code__line">                sure that your browser </div><div class="c-code__line">                &lt;a href=<span class="c-code__stringliteral">&quot;https://developer.mozilla.org/en-US/docs/Web/API/User-Agent_Client_Hints_API#browser_compatibility&quot;</span>&gt;supports them&lt;/a&gt;.</div><div class="c-code__line">            &lt;/div&gt;</div><div class="c-code__line">        &lt;?php } ?&gt;</div><div class="c-code__line">        &lt;br /&gt;</div><div class="c-code__line"></div><div class="c-code__line">        &lt;div <span class="c-code__keywordtype">id</span>=<span class="c-code__stringliteral">&quot;evidence&quot;</span>&gt;</div><div class="c-code__line">            &lt;h2&gt;Evidence Used:&lt;/h2&gt;</div><div class="c-code__line">            &lt;p <span class="c-code__keyword">class</span>=<span class="c-code__stringliteral">&quot;smaller&quot;</span>&gt;Evidence was &lt;span <span class="c-code__keyword">class</span>=<span class="c-code__stringliteral">&quot;lightgreen&quot;</span>&gt;used&lt;/span&gt; / &lt;span <span class="c-code__keyword">class</span>=<span class="c-code__stringliteral">&quot;lightyellow&quot;</span>&gt;present&lt;/span&gt; <span class="c-code__keywordflow">for</span> detection&lt;/p&gt;</div><div class="c-code__line">            &lt;table&gt;</div><div class="c-code__line">                &lt;tr&gt;</div><div class="c-code__line">                    &lt;th&gt;Key&lt;/th&gt;</div><div class="c-code__line">                    &lt;th&gt;Value&lt;/th&gt;</div><div class="c-code__line">                &lt;/tr&gt;</div><div class="c-code__line">                &lt;?php</div><div class="c-code__line">                    <span class="c-code__keywordflow">foreach</span> ($flowData-&gt;evidence-&gt;getAll() as $key =&gt; $value) {</div><div class="c-code__line">                        <span class="c-code__keywordflow">if</span> ($flowData-&gt;pipeline-&gt;getElement(<span class="c-code__stringliteral">&#39;device&#39;</span>)-&gt;getEvidenceKeyFilter()-&gt;filterEvidenceKey($key)) {</div><div class="c-code__line">                            $output(<span class="c-code__stringliteral">&quot;&lt;tr class=&#39;lightgreen&#39;&gt;&quot;</span>);</div><div class="c-code__line">                        } <span class="c-code__keywordflow">else</span> {</div><div class="c-code__line">                            $output(<span class="c-code__stringliteral">&quot;&lt;tr class=&#39;lightyellow&#39;&gt;&quot;</span>);</div><div class="c-code__line">                        }</div><div class="c-code__line">                        $output(<span class="c-code__stringliteral">&#39;&lt;td&gt;&lt;b&gt;&#39;</span> . $key . <span class="c-code__stringliteral">&#39;&lt;/b&gt;&lt;/td&gt;&#39;</span>);</div><div class="c-code__line">                        $output(<span class="c-code__stringliteral">&#39;&lt;td&gt;&#39;</span> . $value . <span class="c-code__stringliteral">&#39;&lt;/td&gt;&#39;</span>);</div><div class="c-code__line">                        $output(<span class="c-code__stringliteral">&#39;&lt;/tr&gt;&#39;</span>);</div><div class="c-code__line">                    }</div><div class="c-code__line">                ?&gt;</div><div class="c-code__line">            &lt;/table&gt;</div><div class="c-code__line">        &lt;/div&gt;</div><div class="c-code__line">        &lt;br /&gt;</div><div class="c-code__line"></div><div class="c-code__line">        &lt;h2&gt;Device Data&lt;/h2&gt;</div><div class="c-code__line">        &lt;p <span class="c-code__keyword">class</span>=<span class="c-code__stringliteral">&quot;smaller&quot;</span>&gt;</div><div class="c-code__line">            The following values are determined by sever-side device detection</div><div class="c-code__line">            on the first request:</div><div class="c-code__line">        &lt;/p&gt;</div><div class="c-code__line">        &lt;table&gt;</div><div class="c-code__line">            &lt;tr&gt;</div><div class="c-code__line">                &lt;th&gt;Key&lt;/th&gt;</div><div class="c-code__line">                &lt;th&gt;Value&lt;/th&gt;</div><div class="c-code__line">            &lt;/tr&gt;</div><div class="c-code__line">            &lt;tr <span class="c-code__keyword">class</span>=<span class="c-code__stringliteral">&quot;lightyellow&quot;</span>&gt;&lt;td&gt;&lt;b&gt;Hardware Vendor:&lt;/b&gt;&lt;/td&gt;&lt;td&gt; &lt;?php $output(ExampleUtils::getHumanReadable($flowData-&gt;device, <span class="c-code__stringliteral">&#39;hardwarevendor&#39;</span>)); ?&gt;&lt;/td&gt;&lt;/tr&gt;</div><div class="c-code__line">            &lt;tr <span class="c-code__keyword">class</span>=<span class="c-code__stringliteral">&quot;lightyellow&quot;</span>&gt;&lt;td&gt;&lt;b&gt;Hardware Name:&lt;/b&gt;&lt;/td&gt;&lt;td&gt; &lt;?php $output(ExampleUtils::getHumanReadable($flowData-&gt;device, <span class="c-code__stringliteral">&#39;hardwarename&#39;</span>)); ?&gt;&lt;/td&gt;&lt;/tr&gt;</div><div class="c-code__line">            &lt;tr <span class="c-code__keyword">class</span>=<span class="c-code__stringliteral">&quot;lightyellow&quot;</span>&gt;&lt;td&gt;&lt;b&gt;Device Type:&lt;/b&gt;&lt;/td&gt;&lt;td&gt; &lt;?php $output(ExampleUtils::getHumanReadable($flowData-&gt;device, <span class="c-code__stringliteral">&#39;devicetype&#39;</span>)); ?&gt;&lt;/td&gt;&lt;/tr&gt;</div><div class="c-code__line">            &lt;tr <span class="c-code__keyword">class</span>=<span class="c-code__stringliteral">&quot;lightyellow&quot;</span>&gt;&lt;td&gt;&lt;b&gt;Platform Vendor:&lt;/b&gt;&lt;/td&gt;&lt;td&gt; &lt;?php $output(ExampleUtils::getHumanReadable($flowData-&gt;device, <span class="c-code__stringliteral">&#39;platformvendor&#39;</span>)); ?&gt;&lt;/td&gt;&lt;/tr&gt;</div><div class="c-code__line">            &lt;tr <span class="c-code__keyword">class</span>=<span class="c-code__stringliteral">&quot;lightyellow&quot;</span>&gt;&lt;td&gt;&lt;b&gt;Platform Name:&lt;/b&gt;&lt;/td&gt;&lt;td&gt; &lt;?php $output(ExampleUtils::getHumanReadable($flowData-&gt;device, <span class="c-code__stringliteral">&#39;platformname&#39;</span>)); ?&gt;&lt;/td&gt;&lt;/tr&gt;</div><div class="c-code__line">            &lt;tr <span class="c-code__keyword">class</span>=<span class="c-code__stringliteral">&quot;lightyellow&quot;</span>&gt;&lt;td&gt;&lt;b&gt;Platform Version:&lt;/b&gt;&lt;/td&gt;&lt;td&gt; &lt;?php $output(ExampleUtils::getHumanReadable($flowData-&gt;device, <span class="c-code__stringliteral">&#39;platformversion&#39;</span>)); ?&gt;&lt;/td&gt;&lt;/tr&gt;</div><div class="c-code__line">            &lt;tr <span class="c-code__keyword">class</span>=<span class="c-code__stringliteral">&quot;lightyellow&quot;</span>&gt;&lt;td&gt;&lt;b&gt;Browser Vendor:&lt;/b&gt;&lt;/td&gt;&lt;td&gt; &lt;?php $output(ExampleUtils::getHumanReadable($flowData-&gt;device, <span class="c-code__stringliteral">&#39;browservendor&#39;</span>)); ?&gt;&lt;/td&gt;&lt;/tr&gt;</div><div class="c-code__line">            &lt;tr <span class="c-code__keyword">class</span>=<span class="c-code__stringliteral">&quot;lightyellow&quot;</span>&gt;&lt;td&gt;&lt;b&gt;Browser Name:&lt;/b&gt;&lt;/td&gt;&lt;td&gt; &lt;?php $output(ExampleUtils::getHumanReadable($flowData-&gt;device, <span class="c-code__stringliteral">&#39;browsername&#39;</span>)); ?&gt;&lt;/td&gt;&lt;/tr&gt;</div><div class="c-code__line">            &lt;tr <span class="c-code__keyword">class</span>=<span class="c-code__stringliteral">&quot;lightyellow&quot;</span>&gt;&lt;td&gt;&lt;b&gt;Browser Version:&lt;/b&gt;&lt;/td&gt;&lt;td&gt; &lt;?php $output(ExampleUtils::getHumanReadable($flowData-&gt;device, <span class="c-code__stringliteral">&#39;browserversion&#39;</span>)); ?&gt;&lt;/td&gt;&lt;/tr&gt;</div><div class="c-code__line">            &lt;tr <span class="c-code__keyword">class</span>=<span class="c-code__stringliteral">&quot;lightyellow&quot;</span>&gt;&lt;td&gt;&lt;b&gt;Screen width (pixels):&lt;/b&gt;&lt;/td&gt;&lt;td&gt; &lt;?php $output(ExampleUtils::getHumanReadable($flowData-&gt;device, <span class="c-code__stringliteral">&#39;screenpixelswidth&#39;</span>)); ?&gt;&lt;/td&gt;&lt;/tr&gt;</div><div class="c-code__line">            &lt;tr <span class="c-code__keyword">class</span>=<span class="c-code__stringliteral">&quot;lightyellow&quot;</span>&gt;&lt;td&gt;&lt;b&gt;Screen height (pixels):&lt;/b&gt;&lt;/td&gt;&lt;td&gt; &lt;?php $output(ExampleUtils::getHumanReadable($flowData-&gt;device, <span class="c-code__stringliteral">&#39;screenpixelsheight&#39;</span>)); ?&gt;&lt;/td&gt;&lt;/tr&gt;</div><div class="c-code__line">        &lt;/table&gt;</div><div class="c-code__line">        &lt;br /&gt;</div><div class="c-code__line"></div><div class="c-code__line">        &lt;h3&gt;Client-side Evidence and Apple Models&lt;/h3&gt;</div><div class="c-code__line">        &lt;p&gt;</div><div class="c-code__line">            The information shown below is determined after a callback is made to the server with</div><div class="c-code__line">            additional evidence that is gathered by JavaScript running on the client-side.</div><div class="c-code__line">            The callback will also include any additional client hints headers that have been requested.</div><div class="c-code__line">        &lt;/p&gt;</div><div class="c-code__line">        &lt;p&gt;</div><div class="c-code__line">            When an Apple device is used, the results from</div><div class="c-code__line">            the first request above will show all Apple models because the server cannot tell the</div><div class="c-code__line">            exact model of the device. In contrast, the results from the callback below will show</div><div class="c-code__line">            a smaller <span class="c-code__keyword">set</span> of possible models.</div><div class="c-code__line">            This can be tested to some extent <span class="c-code__keyword">using</span> most emulators, such as those in the</div><div class="c-code__line">            <span class="c-code__stringliteral">&#39;developer tools&#39;</span> menu in Google Chrome. However, these are not the identical to real</div><div class="c-code__line">            devices so <span class="c-code__keyword">this</span> can cause some unusual results. Using real devices will generally be more</div><div class="c-code__line">            successful.</div><div class="c-code__line">        &lt;/p&gt;</div><div class="c-code__line">        &lt;p&gt;</div><div class="c-code__line">            If you want to work with Apple Model or other client-side information, such as screen</div><div class="c-code__line">            width/height on the server, then you will need to ensure that the <span class="c-code__stringliteral">&#39;enableCookies&#39;</span> setting</div><div class="c-code__line">            is <span class="c-code__keyword">set</span> to <span class="c-code__stringliteral">&#39;true&#39;</span> as in the pipeline construction <span class="c-code__keywordflow">for</span> <span class="c-code__keyword">this</span> example.</div><div class="c-code__line">            This will cause the additional client-side evidence to be saved as cookies on the client.</div><div class="c-code__line">            When a future page is requested, these cookies will be included with the request and the</div><div class="c-code__line">            device detection API will include them when working out the details of the device.</div><div class="c-code__line">            Refreshing <span class="c-code__keyword">this</span> page can be used to show <span class="c-code__keyword">this</span> in action. Any values that are unique to the </div><div class="c-code__line">            client-side values below will appear in the evidence values used and server-side results </div><div class="c-code__line">            after the refresh.</div><div class="c-code__line">        &lt;/p&gt;</div><div class="c-code__line">        &lt;?php <span class="c-code__keywordflow">if</span> (ExampleUtils::getDataFileTier($flowData-&gt;pipeline-&gt;getElement(<span class="c-code__stringliteral">&#39;device&#39;</span>)) == <span class="c-code__stringliteral">&#39;Lite&#39;</span>) { ?&gt;</div><div class="c-code__line">            &lt;div <span class="c-code__keyword">class</span>=<span class="c-code__stringliteral">&quot;example-alert&quot;</span>&gt;</div><div class="c-code__line">                WARNING: You are <span class="c-code__keyword">using</span> the free <span class="c-code__stringliteral">&#39;Lite&#39;</span> data file. This does not include the client-side</div><div class="c-code__line">                evidence capabilities of the paid-<span class="c-code__keywordflow">for</span> data file, so you will not see any additional</div><div class="c-code__line">                data below. Find out about the Enterprise data file on our</div><div class="c-code__line">                &lt;a href=<span class="c-code__stringliteral">&quot;https://51degrees.com/pricing&quot;</span>&gt;pricing page&lt;/a&gt;.</div><div class="c-code__line">            &lt;/div&gt;</div><div class="c-code__line">        &lt;?php } ?&gt;</div><div class="c-code__line">    &lt;/div&gt;</div><div class="c-code__line">&lt;div&gt;</div><div class="c-code__line">&lt;!--</div><div class="c-code__line">    This script is constructed by the fiftyone\pipeline\core package.</div><div class="c-code__line">    It adds a JavaScript include <span class="c-code__keywordflow">for</span> 51Degrees.core.js.</div><div class="c-code__line">    The 51Degrees pipeline will dynamically generate JavaScript, which includes a</div><div class="c-code__line">    JSON representation of the contents of flow data.</div><div class="c-code__line">    i.e. The results from device detection.</div><div class="c-code__line"></div><div class="c-code__line">    In addition, <span class="c-code__keyword">this</span> JavaScript will look <span class="c-code__keywordflow">for</span> properties that have a flag <span class="c-code__keyword">set</span> indicating that</div><div class="c-code__line">    they contain executable script snippets.</div><div class="c-code__line">    These snippets will be executed and the values they obtain will be sent back to the server</div><div class="c-code__line">    in order <span class="c-code__keywordflow">for</span> it to perform the detection process again with the <span class="c-code__keyword">new</span> information.</div><div class="c-code__line">    This callback will also include any User-Agent Client Hints headers that have been requested</div><div class="c-code__line">    with the <span class="c-code__stringliteral">&#39;Accept-CH&#39;</span> header. (assuming the browser is willing to send them)</div><div class="c-code__line"></div><div class="c-code__line">    When the server responds, the JSON representation of the results will be updated with the</div><div class="c-code__line">    <span class="c-code__keyword">new</span> values and the <span class="c-code__stringliteral">&#39;complete&#39;</span> event will fire.</div><div class="c-code__line">    Below, we subscribe to <span class="c-code__keyword">this</span> complete event and display the values from the updated JSON.</div><div class="c-code__line">--&gt;</div><div class="c-code__line">&lt;script&gt;</div><div class="c-code__line">    &lt;?php</div><div class="c-code__line">        $output($flowData-&gt;javascriptbuilder-&gt;javascript);</div><div class="c-code__line">    ?&gt;</div><div class="c-code__line">&lt;/script&gt;</div><div class="c-code__line"></div><div class="c-code__line">&lt;script&gt;</div><div class="c-code__line">    window.onload = <span class="c-code__keyword">function</span> () {</div><div class="c-code__line">        <span class="c-code__comment">// Subscribe to the &#39;complete&#39; event.</span></div><div class="c-code__line">        fod.complete(<span class="c-code__keyword">function</span> (data) {</div><div class="c-code__line">            <span class="c-code__comment">// When the event fires, use the supplied data to populate a new table.</span></div><div class="c-code__line">            let fieldValues = [];</div><div class="c-code__line"></div><div class="c-code__line">            var hardwareName = typeof data.device.hardwarename == <span class="c-code__stringliteral">&quot;undefined&quot;</span> ?</div><div class="c-code__line">                <span class="c-code__stringliteral">&quot;Unknown&quot;</span> : data.device.hardwarename.join(<span class="c-code__stringliteral">&quot;, &quot;</span>)</div><div class="c-code__line">            fieldValues.push([<span class="c-code__stringliteral">&quot;Hardware Name: &quot;</span>, hardwareName]);</div><div class="c-code__line">            fieldValues.push([<span class="c-code__stringliteral">&quot;Platform: &quot;</span>,</div><div class="c-code__line">                data.device.platformname + <span class="c-code__stringliteral">&quot; &quot;</span> + data.device.platformversion]);</div><div class="c-code__line">            fieldValues.push([<span class="c-code__stringliteral">&quot;Browser: &quot;</span>,</div><div class="c-code__line">                data.device.browsername + <span class="c-code__stringliteral">&quot; &quot;</span> + data.device.browserversion]);</div><div class="c-code__line">            fieldValues.push([<span class="c-code__stringliteral">&quot;Screen width (pixels): &quot;</span>, data.device.screenpixelswidth]);</div><div class="c-code__line">            fieldValues.push([<span class="c-code__stringliteral">&quot;Screen height (pixels): &quot;</span>, data.device.screenpixelsheight]);</div><div class="c-code__line">            displayValues(fieldValues);</div><div class="c-code__line">        });</div><div class="c-code__line">    }</div><div class="c-code__line"></div><div class="c-code__line">    <span class="c-code__comment">// Helper function to add a table that displays the supplied values.</span></div><div class="c-code__line">    <span class="c-code__keyword">function</span> displayValues(fieldValues) {</div><div class="c-code__line">        var table = document.createElement(<span class="c-code__stringliteral">&quot;table&quot;</span>);</div><div class="c-code__line">        var tr = document.createElement(<span class="c-code__stringliteral">&quot;tr&quot;</span>);</div><div class="c-code__line">        addToRow(tr, <span class="c-code__stringliteral">&quot;th&quot;</span>, <span class="c-code__stringliteral">&quot;Key&quot;</span>, <span class="c-code__keyword">false</span>);</div><div class="c-code__line">        addToRow(tr, <span class="c-code__stringliteral">&quot;th&quot;</span>, <span class="c-code__stringliteral">&quot;Value&quot;</span>, <span class="c-code__keyword">false</span>);</div><div class="c-code__line">        table.appendChild(tr);</div><div class="c-code__line"></div><div class="c-code__line">        fieldValues.forEach(<span class="c-code__keyword">function</span> (entry) {</div><div class="c-code__line">            var tr = document.createElement(<span class="c-code__stringliteral">&quot;tr&quot;</span>);</div><div class="c-code__line">            tr.classList.add(<span class="c-code__stringliteral">&quot;lightyellow&quot;</span>);</div><div class="c-code__line">            addToRow(tr, <span class="c-code__stringliteral">&quot;td&quot;</span>, entry[0], <span class="c-code__keyword">true</span>);</div><div class="c-code__line">            addToRow(tr, <span class="c-code__stringliteral">&quot;td&quot;</span>, entry[1], <span class="c-code__keyword">false</span>);</div><div class="c-code__line">            table.appendChild(tr);</div><div class="c-code__line">        });</div><div class="c-code__line"></div><div class="c-code__line">        var element = document.getElementById(<span class="c-code__stringliteral">&quot;content&quot;</span>);</div><div class="c-code__line">        element.appendChild(table);</div><div class="c-code__line">    }</div><div class="c-code__line"></div><div class="c-code__line">    <span class="c-code__comment">// Helper function to add an entry to a table row.</span></div><div class="c-code__line">    <span class="c-code__keyword">function</span> addToRow(row, elementName, text, strong) {</div><div class="c-code__line">        var entry = document.createElement(elementName);</div><div class="c-code__line">        var textNode = document.createTextNode(text);</div><div class="c-code__line">        <span class="c-code__keywordflow">if</span> (strong === <span class="c-code__keyword">true</span>) {</div><div class="c-code__line">            var strongNode = document.createElement(<span class="c-code__stringliteral">&quot;strong&quot;</span>);</div><div class="c-code__line">            strongNode.appendChild(textNode);</div><div class="c-code__line">            textNode = strongNode;</div><div class="c-code__line">        }</div><div class="c-code__line">        entry.appendChild(textNode);</div><div class="c-code__line">        row.appendChild(entry);</div><div class="c-code__line">    }</div><div class="c-code__line">&lt;/script&gt;</div></div><h2>Class</h2>
<div class="c-code__block c-code__block--outline"><div class="c-code__line">&lt;?php</div><div class="c-code__line"><span class="c-code__comment">/* *********************************************************************</span></div><div class="c-code__line"><span class="c-code__comment"> * This Original Work is copyright of 51 Degrees Mobile Experts Limited.</span></div><div class="c-code__line"><span class="c-code__comment"> * Copyright 2023 51 Degrees Mobile Experts Limited, Davidson House,</span></div><div class="c-code__line"><span class="c-code__comment"> * Forbury Square, Reading, Berkshire, United Kingdom RG1 3EU.</span></div><div class="c-code__line"><span class="c-code__comment"> *</span></div><div class="c-code__line"><span class="c-code__comment"> * This Original Work is licensed under the European Union Public Licence</span></div><div class="c-code__line"><span class="c-code__comment"> * (EUPL) v.1.2 and is subject to its terms as set out below.</span></div><div class="c-code__line"><span class="c-code__comment"> *</span></div><div class="c-code__line"><span class="c-code__comment"> * If a copy of the EUPL was not distributed with this file, You can obtain</span></div><div class="c-code__line"><span class="c-code__comment"> * one at https://opensource.org/licenses/EUPL-1.2.</span></div><div class="c-code__line"><span class="c-code__comment"> *</span></div><div class="c-code__line"><span class="c-code__comment"> * The &#39;Compatible Licences&#39; set out in the Appendix to the EUPL (as may be</span></div><div class="c-code__line"><span class="c-code__comment"> * amended by the European Commission) shall be deemed incompatible for</span></div><div class="c-code__line"><span class="c-code__comment"> * the purposes of the Work and the provisions of the compatibility</span></div><div class="c-code__line"><span class="c-code__comment"> * clause in Article 5 of the EUPL shall not apply.</span></div><div class="c-code__line"><span class="c-code__comment"> *</span></div><div class="c-code__line"><span class="c-code__comment"> * If using the Work as, or as part of, a network application, by</span></div><div class="c-code__line"><span class="c-code__comment"> * including the attribution notice(s) required under Article 5 of the EUPL</span></div><div class="c-code__line"><span class="c-code__comment"> * in the end user terms of the application under an appropriate heading,</span></div><div class="c-code__line"><span class="c-code__comment"> * such notice(s) shall fulfill the requirements of that article.</span></div><div class="c-code__line"><span class="c-code__comment"> * ********************************************************************* */</span></div><div class="c-code__line"></div><div class="c-code__line">require __DIR__ . <span class="c-code__stringliteral">&#39;/../../vendor/autoload.php&#39;</span>;</div><div class="c-code__line"></div><div class="c-code__line">use fiftyone\pipeline\core\Logger;</div><div class="c-code__line">use <a name="_a1"></a><a class="code" href="classfiftyone_1_1pipeline_1_1devicedetection_1_1examples_1_1onpremise_1_1classes_1_1_getting_started_web.html">fiftyone\pipeline\devicedetection\examples\onpremise\classes\GettingStartedWeb</a>;</div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__keyword">function</span> main($argv)</div><div class="c-code__line">{</div><div class="c-code__line">    <span class="c-code__comment">// Configure a logger to output to the console.</span></div><div class="c-code__line">    $logger = <span class="c-code__keyword">new</span> Logger(<span class="c-code__stringliteral">&#39;info&#39;</span>);</div><div class="c-code__line"></div><div class="c-code__line">    $configFile = __DIR__ . <span class="c-code__stringliteral">&#39;/gettingStartedWeb.json&#39;</span>;</div><div class="c-code__line"></div><div class="c-code__line">    (<span class="c-code__keyword">new</span> GettingStartedWeb())-&gt;run($configFile, $logger, <span class="c-code__keyword">function</span> ($message) { echo $message; });</div><div class="c-code__line">}</div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__keywordflow">if</span> (basename(__FILE__) == basename($_SERVER[<span class="c-code__stringliteral">&#39;SCRIPT_FILENAME&#39;</span>])) {</div><div class="c-code__line">    main(isset($argv) ? array_slice($argv, 1) : <span class="c-code__keyword">null</span>);</div><div class="c-code__line">}</div></div> </div><!-- primary -->
</div><!-- inner-->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<section id="nav-path" class="g-footer g-footer--docs"><!-- id is needed for treeview function! -->
    <p class="g-footer__copyright">Generated by
    <a href="http://www.doxygen.org/index.html">
    <b>doxygen</b></a> 1.8.15
  </p>
</section>
</div>
</main>
</div>
</body>
</html>
